<!DOCTYPE html>
<html lang="zh">
<head>
		<title>Linux下通过cue分轨成flac | Frantic World</title>
	<meta charset="utf-8" />
    <meta name="author" content="Frantic1048">
	<link rel="stylesheet" href="http://frantic1048.com/theme/css/franticworld.css" type="text/css" />
	<link href="http://frantic1048.com/theme/css/pygments.css" rel="stylesheet">
	</head>
<body background="http://frantic1048.com/theme/img/pattern.png">
		<div class="nav-banner">
		<a href="http://frantic1048.com">Frantic World</a>
		</div>
		
		<div class="content">
		
<div class="metabox">
	<p class="metaday">132</p>
	<p class="metayear">2014</p>
	<p class="metacategory">Misc</p>
</div>
<div class="arcticlecontentbox">
	<div class="articlecontent">
		<a class="articletitle" href="/linuxxia-tong-guo-cuefen-gui-cheng-flac.html " >Linux下通过cue分轨成flac</a>
		<p>最近遇到分轨的问题，一个巨大的文件跟着一个cue个人觉得还是不方便，网上查了一下最后翻到了<a href="https://wiki.archlinux.org/index.php/APE+CUE_Splitting">Archwiki</a>上面找到了比较完整的解决办法，把分轨和标签填充一并搞定了，另外顺便把封面嵌入也一起解决。</p>
<h1>预备工具</h1>
<p>我是直接把wiki里面提到的工具都给安装了，这里给个列表，直接用pacman安装即可。</p>
<ul>
<li>shntool （用于分割音频文件）</li>
<li>bchunk （iso/bin文件支持）</li>
<li>mac （APE编解码器）</li>
<li>flac （flac编码器）</li>
<li>wavpack （wav支持）</li>
<li>lame （MP3编码器）</li>
<li>mp3info （MP3 ID3 1.x标签支持）</li>
<li>vorbis-tools （Ogg的额外工具）</li>
<li>cuetools (cue,toc 文件解析)</li>
</ul>
<h1>开始分轨</h1>
<p>接下来通过cue文件进行分轨，这里是我平常用的方法</p>
<div class="highlight"><pre><span class="n">shnsplit</span> <span class="o">-</span><span class="n">f</span> <span class="n">file</span><span class="p">.</span><span class="n">cue</span> <span class="o">-</span><span class="n">o</span> <span class="n">flac</span> <span class="o">-</span><span class="n">t</span> <span class="s">&quot;%n %t&quot;</span> <span class="n">file</span><span class="p">.</span><span class="n">wav</span>
</pre></div>


<blockquote>
<p>-f选项指定用来作为分轨依据的cue文件
-o选项可以指定输出文件格式，这里用的是flac
-t用来自定义输出文件的文件名，用一个字符串作为参数，%n表示轨道编号，%t表示轨道标题，%a为专辑名，%p为表演者。
最后一个参数是被用来分轨的音频文件</p>
</blockquote>
<p>执行之后会在当前目录生成分轨后的文件。</p>
<h1>标签/封面</h1>
<p>使用cuetag一键完成，它会自动根据cue里面的轨道信息和分轨后的文件的名字自动填标签。</p>
<div class="highlight"><pre><span class="n">cuetag</span><span class="p">.</span><span class="n">sh</span> <span class="n">file</span><span class="p">.</span><span class="n">cue</span> <span class="o">*</span><span class="p">.</span><span class="n">flac</span>
</pre></div>


<p>关于添加封面，这里直接使用了ubuntu论坛上找到的现成的脚本，用封面文件作为参数运行脚本之后它会自动把图片嵌入当前目录和子目录的flac文件中。</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c">#</span>
<span class="c"># This script embeds a given image (usually .jpg) as album art in the</span>
<span class="c"># FLAC files in the present directory (and its subdirectories).</span>
<span class="c">#</span>
<span class="c"># Time-stamp: &lt;2011-07-31 20:43:23 (lennart)&gt;</span>

<span class="nv">coverart</span><span class="o">=</span><span class="nv">$1</span>

find . -name <span class="s2">&quot;*.flac&quot;</span> -print0 |xargs -0 metaflac --import-picture-from<span class="o">=</span><span class="s2">&quot;$coverart&quot;</span>
</pre></div>
</td></tr></table>

<p>至此，一切就搞定啦！</p>
	</div>
	
		<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	   var disqus_identifier = "linuxxia-tong-guo-cuefen-gui-cheng-flac.html";
	   (function() {
			var dsq = document.createElement('script');
			dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = 'http://frantic1048.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] ||
			 document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
	</script>
	</div>
		       
</div>

		</div>
		
		<div class="sidebar">
		<div class="sidebarcategory">
<h4>Categories</h4>
	<li><a href="http://frantic1048.com/category/blog.html">Blog</a></li>
	<li><a href="http://frantic1048.com/category/life.html">Life</a></li>
	<li><a href="http://frantic1048.com/category/linux.html">Linux</a></li>
	<li><a href="http://frantic1048.com/category/misc.html">Misc</a></li>
	<li><a href="http://frantic1048.com/category/web.html">Web</a></li>
</div>

<div class="sidebarpages">
	<h4>Pages</h4>
			<li><a href="http://frantic1048.com/pages/about.html">About</a></li>
	</div>

<div class="sidebarblogroll">
<h4>Blogroll</h4>
    <li><a href="http://www.linuxzen.com/" target="_blank">cold</a></li>
    <li><a href="http://www.dongxf.com/" target="_blank">晓风</a></li>
    <li><a href="http://www.pythontip.com/home" target="_blank">一人一python</a></li>
</div>

<div class="sidebarsocial">
<h4>Social</h4>
    <li><a href="http://tudou.com/home/FranticBlack">Tudou</a></li>
    <li><a href="https://github.com/frantic1048">Github</a></li>
</div>		</div>
		
		<footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>,
				Theme by <a href="http://frantic1048.com/">Frantic1048</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>